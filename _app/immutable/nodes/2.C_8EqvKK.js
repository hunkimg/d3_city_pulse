import"../chunks/CWj6FrbW.js";import{i as We}from"../chunks/DTa2a5Cz.js";import{ag as Hn,x as Fn,B as nt,v as X,a6 as On,w as Qt,h as y,R as Oe,y as Bn,z as Xn,A as wt,C as it,I as ve,a7 as zn,aa as Yn,D as Zt,F as jt,G as Gn,aw as rt,ae as en,a1 as Ct,ax as Kn,as as M,ay as At,a3 as Wn,az as Jn,aA as Qn,ad as Zn,aB as jn,aC as ei,aD as ti,aE as ni,a8 as ii,aF as ri,aG as si,aH as ai,aI as oi,aJ as li,M as ci,a4 as fi,p as Je,aK as Ae,aL as tn,l as se,a as re,m as Qe,Q as E,i as he,q as ne,n as T,o as q,e as ae,t as ge,aM as ui}from"../chunks/Cnv5cWh7.js";import{c as hi,s as Se,e as St,o as nn}from"../chunks/DgZvMjCJ.js";import{p as F,b as ot,i as di}from"../chunks/UbRTYZ-z.js";let Rt=!1;function gi(){Rt||(Rt=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const n of e.target.elements)(t=n.__on_r)==null||t.call(n)})},{capture:!0}))}function It(e,t){return t}function yi(e,t,n,i){for(var r=[],a=t.length,s=0;s<a;s++)Qn(t[s].e,r,!0);var l=a>0&&r.length===0&&n!==null;if(l){var f=n.parentNode;Zn(f),f.append(n),i.clear(),ee(e,t[0].prev,t[a-1].next)}jn(r,()=>{for(var c=0;c<a;c++){var o=t[c];l||(i.delete(o.k),ee(e,o.prev,o.next)),ei(o.e,!l)}})}function Et(e,t,n,i,r,a=null){var s=e,l={flags:t,items:new Map,first:null};{var f=e;s=X?nt(On(f)):f.appendChild(Hn())}X&&Qt();var c=null,o=!1,h=Oe(()=>{var d=n();return Wn(d)?d:d==null?[]:en(d)});Fn(()=>{var d=y(h),u=d.length;if(o&&u===0)return;o=u===0;let g=!1;if(X){var p=Bn(s)===Xn;p!==(u===0)&&(s=wt(),nt(s),it(!1),g=!0)}if(X){for(var m=null,v,b=0;b<u;b++){if(ve.nodeType===zn&&ve.data===Yn){s=ve,g=!0,it(!1);break}var x=d[b],S=i(x,b);v=rn(ve,l,m,null,x,S,b,r,t,n),l.items.set(S,v),m=v}u>0&&nt(wt())}X||pi(d,l,s,r,t,i,n),a!==null&&(u===0?c?Zt(c):c=jt(()=>a(s)):c!==null&&Gn(c,()=>{c=null})),g&&it(!0),y(h)}),X&&(s=ve)}function pi(e,t,n,i,r,a,s){var l=e.length,f=t.items,c=t.first,o=c,h,d=null,u=[],g=[],p,m,v,b;for(b=0;b<l;b+=1){if(p=e[b],m=a(p,b),v=f.get(m),v===void 0){var x=o?o.e.nodes_start:n;d=rn(x,t,d,d===null?t.first:d.next,p,m,b,i,r,s),f.set(m,d),u=[],g=[],o=d.next;continue}if(mi(v,p,b),(v.e.f&rt)!==0&&Zt(v.e),v!==o){if(h!==void 0&&h.has(v)){if(u.length<g.length){var S=g[0],w;d=S.prev;var N=u[0],C=u[u.length-1];for(w=0;w<u.length;w+=1)Nt(u[w],S,n);for(w=0;w<g.length;w+=1)h.delete(g[w]);ee(t,N.prev,C.next),ee(t,d,N),ee(t,C,S),o=S,d=C,b-=1,u=[],g=[]}else h.delete(v),Nt(v,o,n),ee(t,v.prev,v.next),ee(t,v,d===null?t.first:d.next),ee(t,d,v),d=v;continue}for(u=[],g=[];o!==null&&o.k!==m;)(o.e.f&rt)===0&&(h??(h=new Set)).add(o),g.push(o),o=o.next;if(o===null)continue;v=o}u.push(v),d=v,o=v.next}if(o!==null||h!==void 0){for(var k=h===void 0?[]:en(h);o!==null;)(o.e.f&rt)===0&&k.push(o),o=o.next;var B=k.length;if(B>0){var H=l===0?n:null;yi(t,k,H,f)}}Ct.first=t.first&&t.first.e,Ct.last=d&&d.e}function mi(e,t,n,i){Kn(e.v,t),e.i=n}function rn(e,t,n,i,r,a,s,l,f,c){var o=(f&ti)!==0,h=(f&ni)===0,d=o?h?M(r,!1,!1):At(r):r,u=(f&Jn)===0?s:At(s),g={i:u,v:d,k:a,a:null,e:null,prev:n,next:i};try{return g.e=jt(()=>l(e,d,u,c),X),g.e.prev=n&&n.e,g.e.next=i&&i.e,n===null?t.first=g:(n.next=g,n.e.next=g.e),i!==null&&(i.prev=g,i.e.prev=g.e),g}finally{}}function Nt(e,t,n){for(var i=e.next?e.next.e.nodes_start:n,r=t?t.e.nodes_start:n,a=e.e.nodes_start;a!==i;){var s=ii(a);r.before(a),a=s}}function ee(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function vi(e,t,n,i,r){var l;X&&Qt();var a=(l=t.$$slots)==null?void 0:l[n],s=!1;a===!0&&(a=t.children,s=!0),a===void 0||a(e,s?()=>i:i)}function bi(e,t){return e==null?null:String(e)}function sn(e,t,n,i){var r=e.__style;if(X||r!==t){var a=bi(t);(!X||a!==e.getAttribute("style"))&&(a==null?e.removeAttribute("style"):e.style.cssText=a),e.__style=t}return i}const _i=Symbol("is custom element"),xi=Symbol("is html");function kt(e){if(X){var t=!1,n=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var i=e.value;ie(e,"value",null),e.value=i}if(e.hasAttribute("checked")){var r=e.checked;ie(e,"checked",null),e.checked=r}}};e.__on_r=n,li(n),gi()}}function Pt(e,t){var n=an(e);n.checked!==(n.checked=t??void 0)&&(e.checked=t)}function ie(e,t,n,i){var r=an(e);X&&(r[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||r[t]!==(r[t]=n)&&(t==="loading"&&(e[ri]=n),n==null?e.removeAttribute(t):typeof n!="string"&&wi(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function an(e){return e.__attributes??(e.__attributes={[_i]:e.nodeName.includes("-"),[xi]:e.namespaceURI===si})}var Mt=new Map;function wi(e){var t=Mt.get(e.nodeName);if(t)return t;Mt.set(e.nodeName,t=[]);for(var n,i=e,r=Element.prototype;r!==i;){n=oi(i);for(var a in n)n[a].set&&t.push(a);i=ai(i)}return t}function Ci(e,t,n){var i=ci(e,t);i&&i.set&&(e[t]=n,fi(()=>{e[t]=null}))}const Ai=!0,Ao=Object.freeze(Object.defineProperty({__proto__:null,prerender:Ai},Symbol.toStringTag,{value:"Module"}));var Si=se('<div class="city-item svelte-dmko79"><input type="checkbox" class="svelte-dmko79"/> <label class="city-label svelte-dmko79"> </label></div>'),Ri=se('<div class="region-group svelte-dmko79"><div class="region-header svelte-dmko79"><input type="checkbox" class="svelte-dmko79"/> <label class="region-label svelte-dmko79"> </label></div> <div class="cities-list svelte-dmko79"></div></div>'),Ii=se('<div class="dropdown-container svelte-dmko79"><label class="svelte-dmko79">Select Cities:</label> <div class="multi-select svelte-dmko79"></div></div>');function Ei(e,t){Je(t,!1);const n=M(),i=M(),r=M();let a=F(t,"citiesData",24,()=>[]),s=F(t,"selectedCities",24,()=>[]);const l=hi();function f(g,p){let m;if(p){const v=a().find(b=>b.City===g);v&&!s().find(b=>b.City===g)?m=[...s(),v]:m=s()}else m=s().filter(v=>v.City!==g);l("citySelect",m)}function c(g,p){const m=y(i)[g];let v;if(p){const b=m.filter(x=>!s().find(S=>S.City===x.City));v=[...s(),...b]}else v=s().filter(b=>!m.find(x=>x.City===b.City));l("citySelect",v)}function o(g){return y(i)[g].map(m=>m.City).every(m=>y(r).includes(m))}function h(g){const p=y(i)[g].map(v=>v.City),m=p.filter(v=>y(r).includes(v));return m.length>0&&m.length<p.length}Ae(()=>he(a()),()=>{E(n,[...new Set(a().map(g=>g.Region))])}),Ae(()=>(y(n),he(a())),()=>{E(i,y(n).reduce((g,p)=>(g[p]=a().filter(m=>m.Region===p),g),{}))}),Ae(()=>he(s()),()=>{E(r,s().map(g=>g.City))}),tn(),We();var d=Ii(),u=ne(T(d),2);Et(u,5,()=>y(n),It,(g,p)=>{var m=Ri(),v=T(m),b=T(v);kt(b);var x=ne(b,2),S=T(x,!0);q(x),q(v);var w=ne(v,2);Et(w,5,()=>(y(i),y(p),ae(()=>y(i)[y(p)])),It,(N,C)=>{var k=Si(),B=T(k);kt(B);var H=ne(B,2),Q=T(H,!0);q(H),q(k),ge(me=>{ie(B,"id",`city-${y(C),ae(()=>y(C).City)??""}`),Pt(B,me),ie(H,"for",`city-${y(C),ae(()=>y(C).City)??""}`),Se(Q,(y(C),ae(()=>y(C).City)))},[()=>(y(r),y(C),ae(()=>y(r).includes(y(C).City)))],Oe),St("change",B,me=>f(y(C).City,me.target.checked)),re(N,k)}),q(w),q(m),ge((N,C)=>{ie(b,"id",`region-${y(p)??""}`),Pt(b,N),b.indeterminate=C,ie(x,"for",`region-${y(p)??""}`),Se(S,y(p))},[()=>(y(p),ae(()=>o(y(p)))),()=>(y(p),ae(()=>h(y(p))))],Oe),St("change",b,N=>c(y(p),N.target.checked)),re(g,m)}),q(u),q(d),re(e,d),Qe()}const Ni="#b03552",ki="#79c27e",Pi="#e9495d",Mi="#db7a2f",qi="#39b7a0",Vi="#db7a2f",Ti="#39b7a0",Ui="#ac84ba",$i="#b91f49",Di="#ffcf80",Li="#4796b6",Hi="#ee6b4c",Fi="#a1d4a2",Oi="#5d56a5",Bi="#555555",Ve={Africa:Ni,"Asia Pacific":"#f18445",Europe:ki,"Latin/South America":"#deb054","Middle East":"#ac84ba","North America":"#0081b1",Agree:Pi,Neutral:Mi,Disagree:qi,"All Personas":"#e9495d",Employee:Vi,Resident:Ti,Visitor:Ui,Northwest:$i,Northcentral:Di,Northeast:Li,Southwest:Hi,Southcentral:Fi,Southeast:Oi,Global:Bi};var Xi=se('<div class="tooltip"><p> </p> <p> </p> <p> </p></div>');function zi(e,t){let n=F(t,"cityName",8),i=F(t,"metricName",8),r=F(t,"metricValue",8);var a=Xi(),s=T(a),l=T(s,!0);q(s);var f=ne(s,2),c=T(f,!0);q(f);var o=ne(f,2),h=T(o,!0);q(o),q(a),ge(()=>{Se(l,n()),Se(c,i()),Se(h,r())}),re(e,a)}var Yi={value:()=>{}};function on(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new Le(n)}function Le(e){this._=e}function Gi(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}Le.prototype=on.prototype={constructor:Le,on:function(e,t){var n=this._,i=Gi(e+"",n),r,a=-1,s=i.length;if(arguments.length<2){for(;++a<s;)if((r=(e=i[a]).type)&&(r=Ki(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<s;)if(r=(e=i[a]).type)n[r]=qt(n[r],e.name,t);else if(t==null)for(r in n)n[r]=qt(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Le(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,a;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],i=0,r=a.length;i<r;++i)a[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,a=i.length;r<a;++r)i[r].value.apply(t,n)}};function Ki(e,t){for(var n=0,i=e.length,r;n<i;++n)if((r=e[n]).name===t)return r.value}function qt(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=Yi,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var lt="http://www.w3.org/1999/xhtml";const Vt={svg:"http://www.w3.org/2000/svg",xhtml:lt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ze(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Vt.hasOwnProperty(t)?{space:Vt[t],local:e}:e}function Wi(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===lt&&t.documentElement.namespaceURI===lt?t.createElement(e):t.createElementNS(n,e)}}function Ji(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function ln(e){var t=Ze(e);return(t.local?Ji:Wi)(t)}function Qi(){}function yt(e){return e==null?Qi:function(){return this.querySelector(e)}}function Zi(e){typeof e!="function"&&(e=yt(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var a=t[r],s=a.length,l=i[r]=new Array(s),f,c,o=0;o<s;++o)(f=a[o])&&(c=e.call(f,f.__data__,o,a))&&("__data__"in f&&(c.__data__=f.__data__),l[o]=c);return new O(i,this._parents)}function ji(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function er(){return[]}function cn(e){return e==null?er:function(){return this.querySelectorAll(e)}}function tr(e){return function(){return ji(e.apply(this,arguments))}}function nr(e){typeof e=="function"?e=tr(e):e=cn(e);for(var t=this._groups,n=t.length,i=[],r=[],a=0;a<n;++a)for(var s=t[a],l=s.length,f,c=0;c<l;++c)(f=s[c])&&(i.push(e.call(f,f.__data__,c,s)),r.push(f));return new O(i,r)}function fn(e){return function(){return this.matches(e)}}function un(e){return function(t){return t.matches(e)}}var ir=Array.prototype.find;function rr(e){return function(){return ir.call(this.children,e)}}function sr(){return this.firstElementChild}function ar(e){return this.select(e==null?sr:rr(typeof e=="function"?e:un(e)))}var or=Array.prototype.filter;function lr(){return Array.from(this.children)}function cr(e){return function(){return or.call(this.children,e)}}function fr(e){return this.selectAll(e==null?lr:cr(typeof e=="function"?e:un(e)))}function ur(e){typeof e!="function"&&(e=fn(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var a=t[r],s=a.length,l=i[r]=[],f,c=0;c<s;++c)(f=a[c])&&e.call(f,f.__data__,c,a)&&l.push(f);return new O(i,this._parents)}function hn(e){return new Array(e.length)}function hr(){return new O(this._enter||this._groups.map(hn),this._parents)}function Be(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Be.prototype={constructor:Be,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function dr(e){return function(){return e}}function gr(e,t,n,i,r,a){for(var s=0,l,f=t.length,c=a.length;s<c;++s)(l=t[s])?(l.__data__=a[s],i[s]=l):n[s]=new Be(e,a[s]);for(;s<f;++s)(l=t[s])&&(r[s]=l)}function yr(e,t,n,i,r,a,s){var l,f,c=new Map,o=t.length,h=a.length,d=new Array(o),u;for(l=0;l<o;++l)(f=t[l])&&(d[l]=u=s.call(f,f.__data__,l,t)+"",c.has(u)?r[l]=f:c.set(u,f));for(l=0;l<h;++l)u=s.call(e,a[l],l,a)+"",(f=c.get(u))?(i[l]=f,f.__data__=a[l],c.delete(u)):n[l]=new Be(e,a[l]);for(l=0;l<o;++l)(f=t[l])&&c.get(d[l])===f&&(r[l]=f)}function pr(e){return e.__data__}function mr(e,t){if(!arguments.length)return Array.from(this,pr);var n=t?yr:gr,i=this._parents,r=this._groups;typeof e!="function"&&(e=dr(e));for(var a=r.length,s=new Array(a),l=new Array(a),f=new Array(a),c=0;c<a;++c){var o=i[c],h=r[c],d=h.length,u=vr(e.call(o,o&&o.__data__,c,i)),g=u.length,p=l[c]=new Array(g),m=s[c]=new Array(g),v=f[c]=new Array(d);n(o,h,p,m,v,u,t);for(var b=0,x=0,S,w;b<g;++b)if(S=p[b]){for(b>=x&&(x=b+1);!(w=m[x])&&++x<g;);S._next=w||null}}return s=new O(s,i),s._enter=l,s._exit=f,s}function vr(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function br(){return new O(this._exit||this._groups.map(hn),this._parents)}function _r(e,t,n){var i=this.enter(),r=this,a=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?a.remove():n(a),i&&r?i.merge(r).order():r}function xr(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,r=n.length,a=i.length,s=Math.min(r,a),l=new Array(r),f=0;f<s;++f)for(var c=n[f],o=i[f],h=c.length,d=l[f]=new Array(h),u,g=0;g<h;++g)(u=c[g]||o[g])&&(d[g]=u);for(;f<r;++f)l[f]=n[f];return new O(l,this._parents)}function wr(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i=e[t],r=i.length-1,a=i[r],s;--r>=0;)(s=i[r])&&(a&&s.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(s,a),a=s);return this}function Cr(e){e||(e=Ar);function t(h,d){return h&&d?e(h.__data__,d.__data__):!h-!d}for(var n=this._groups,i=n.length,r=new Array(i),a=0;a<i;++a){for(var s=n[a],l=s.length,f=r[a]=new Array(l),c,o=0;o<l;++o)(c=s[o])&&(f[o]=c);f.sort(t)}return new O(r,this._parents).order()}function Ar(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Sr(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Rr(){return Array.from(this)}function Ir(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,a=i.length;r<a;++r){var s=i[r];if(s)return s}return null}function Er(){let e=0;for(const t of this)++e;return e}function Nr(){return!this.node()}function kr(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var r=t[n],a=0,s=r.length,l;a<s;++a)(l=r[a])&&e.call(l,l.__data__,a,r);return this}function Pr(e){return function(){this.removeAttribute(e)}}function Mr(e){return function(){this.removeAttributeNS(e.space,e.local)}}function qr(e,t){return function(){this.setAttribute(e,t)}}function Vr(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Tr(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Ur(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function $r(e,t){var n=Ze(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((t==null?n.local?Mr:Pr:typeof t=="function"?n.local?Ur:Tr:n.local?Vr:qr)(n,t))}function dn(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Dr(e){return function(){this.style.removeProperty(e)}}function Lr(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Hr(e,t,n){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function Fr(e,t,n){return arguments.length>1?this.each((t==null?Dr:typeof t=="function"?Hr:Lr)(e,t,n??"")):ye(this.node(),e)}function ye(e,t){return e.style.getPropertyValue(t)||dn(e).getComputedStyle(e,null).getPropertyValue(t)}function Or(e){return function(){delete this[e]}}function Br(e,t){return function(){this[e]=t}}function Xr(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function zr(e,t){return arguments.length>1?this.each((t==null?Or:typeof t=="function"?Xr:Br)(e,t)):this.node()[e]}function gn(e){return e.trim().split(/^|\s+/)}function pt(e){return e.classList||new yn(e)}function yn(e){this._node=e,this._names=gn(e.getAttribute("class")||"")}yn.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function pn(e,t){for(var n=pt(e),i=-1,r=t.length;++i<r;)n.add(t[i])}function mn(e,t){for(var n=pt(e),i=-1,r=t.length;++i<r;)n.remove(t[i])}function Yr(e){return function(){pn(this,e)}}function Gr(e){return function(){mn(this,e)}}function Kr(e,t){return function(){(t.apply(this,arguments)?pn:mn)(this,e)}}function Wr(e,t){var n=gn(e+"");if(arguments.length<2){for(var i=pt(this.node()),r=-1,a=n.length;++r<a;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?Kr:t?Yr:Gr)(n,t))}function Jr(){this.textContent=""}function Qr(e){return function(){this.textContent=e}}function Zr(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function jr(e){return arguments.length?this.each(e==null?Jr:(typeof e=="function"?Zr:Qr)(e)):this.node().textContent}function es(){this.innerHTML=""}function ts(e){return function(){this.innerHTML=e}}function ns(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function is(e){return arguments.length?this.each(e==null?es:(typeof e=="function"?ns:ts)(e)):this.node().innerHTML}function rs(){this.nextSibling&&this.parentNode.appendChild(this)}function ss(){return this.each(rs)}function as(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function os(){return this.each(as)}function ls(e){var t=typeof e=="function"?e:ln(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function cs(){return null}function fs(e,t){var n=typeof e=="function"?e:ln(e),i=t==null?cs:typeof t=="function"?t:yt(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function us(){var e=this.parentNode;e&&e.removeChild(this)}function hs(){return this.each(us)}function ds(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function gs(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ys(e){return this.select(e?gs:ds)}function ps(e){return arguments.length?this.property("__data__",e):this.node().__data__}function ms(e){return function(t){e.call(this,t,this.__data__)}}function vs(e){return e.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");return i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),{type:t,name:n}})}function bs(e){return function(){var t=this.__on;if(t){for(var n=0,i=-1,r=t.length,a;n<r;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++i]=a;++i?t.length=i:delete this.__on}}}function _s(e,t,n){return function(){var i=this.__on,r,a=ms(t);if(i){for(var s=0,l=i.length;s<l;++s)if((r=i[s]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=a,r.options=n),r.value=t;return}}this.addEventListener(e.type,a,n),r={type:e.type,name:e.name,value:t,listener:a,options:n},i?i.push(r):this.__on=[r]}}function xs(e,t,n){var i=vs(e+""),r,a=i.length,s;if(arguments.length<2){var l=this.node().__on;if(l){for(var f=0,c=l.length,o;f<c;++f)for(r=0,o=l[f];r<a;++r)if((s=i[r]).type===o.type&&s.name===o.name)return o.value}return}for(l=t?_s:bs,r=0;r<a;++r)this.each(l(i[r],t,n));return this}function vn(e,t,n){var i=dn(e),r=i.CustomEvent;typeof r=="function"?r=new r(t,n):(r=i.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function ws(e,t){return function(){return vn(this,e,t)}}function Cs(e,t){return function(){return vn(this,e,t.apply(this,arguments))}}function As(e,t){return this.each((typeof t=="function"?Cs:ws)(e,t))}function*Ss(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,a=i.length,s;r<a;++r)(s=i[r])&&(yield s)}var bn=[null];function O(e,t){this._groups=e,this._parents=t}function ke(){return new O([[document.documentElement]],bn)}function Rs(){return this}O.prototype=ke.prototype={constructor:O,select:Zi,selectAll:nr,selectChild:ar,selectChildren:fr,filter:ur,data:mr,enter:hr,exit:br,join:_r,merge:xr,selection:Rs,order:wr,sort:Cr,call:Sr,nodes:Rr,node:Ir,size:Er,empty:Nr,each:kr,attr:$r,style:Fr,property:zr,classed:Wr,text:jr,html:is,raise:ss,lower:os,append:ls,insert:fs,remove:hs,clone:ys,datum:ps,on:xs,dispatch:As,[Symbol.iterator]:Ss};function Tt(e){return typeof e=="string"?new O([[document.querySelector(e)]],[document.documentElement]):new O([[e]],bn)}function Is(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Es(e,t){if(e=Is(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}function mt(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function _n(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function Pe(){}var Re=.7,Xe=1/Re,de="\\s*([+-]?\\d+)\\s*",Ie="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",G="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ns=/^#([0-9a-f]{3,8})$/,ks=new RegExp(`^rgb\\(${de},${de},${de}\\)$`),Ps=new RegExp(`^rgb\\(${G},${G},${G}\\)$`),Ms=new RegExp(`^rgba\\(${de},${de},${de},${Ie}\\)$`),qs=new RegExp(`^rgba\\(${G},${G},${G},${Ie}\\)$`),Vs=new RegExp(`^hsl\\(${Ie},${G},${G}\\)$`),Ts=new RegExp(`^hsla\\(${Ie},${G},${G},${Ie}\\)$`),Ut={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};mt(Pe,Ee,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:$t,formatHex:$t,formatHex8:Us,formatHsl:$s,formatRgb:Dt,toString:Dt});function $t(){return this.rgb().formatHex()}function Us(){return this.rgb().formatHex8()}function $s(){return xn(this).formatHsl()}function Dt(){return this.rgb().formatRgb()}function Ee(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Ns.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Lt(t):n===3?new L(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Te(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Te(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=ks.exec(e))?new L(t[1],t[2],t[3],1):(t=Ps.exec(e))?new L(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Ms.exec(e))?Te(t[1],t[2],t[3],t[4]):(t=qs.exec(e))?Te(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Vs.exec(e))?Ot(t[1],t[2]/100,t[3]/100,1):(t=Ts.exec(e))?Ot(t[1],t[2]/100,t[3]/100,t[4]):Ut.hasOwnProperty(e)?Lt(Ut[e]):e==="transparent"?new L(NaN,NaN,NaN,0):null}function Lt(e){return new L(e>>16&255,e>>8&255,e&255,1)}function Te(e,t,n,i){return i<=0&&(e=t=n=NaN),new L(e,t,n,i)}function Ds(e){return e instanceof Pe||(e=Ee(e)),e?(e=e.rgb(),new L(e.r,e.g,e.b,e.opacity)):new L}function ct(e,t,n,i){return arguments.length===1?Ds(e):new L(e,t,n,i??1)}function L(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}mt(L,ct,_n(Pe,{brighter(e){return e=e==null?Xe:Math.pow(Xe,e),new L(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Re:Math.pow(Re,e),new L(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new L(le(this.r),le(this.g),le(this.b),ze(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ht,formatHex:Ht,formatHex8:Ls,formatRgb:Ft,toString:Ft}));function Ht(){return`#${oe(this.r)}${oe(this.g)}${oe(this.b)}`}function Ls(){return`#${oe(this.r)}${oe(this.g)}${oe(this.b)}${oe((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ft(){const e=ze(this.opacity);return`${e===1?"rgb(":"rgba("}${le(this.r)}, ${le(this.g)}, ${le(this.b)}${e===1?")":`, ${e})`}`}function ze(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function le(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function oe(e){return e=le(e),(e<16?"0":"")+e.toString(16)}function Ot(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new z(e,t,n,i)}function xn(e){if(e instanceof z)return new z(e.h,e.s,e.l,e.opacity);if(e instanceof Pe||(e=Ee(e)),!e)return new z;if(e instanceof z)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),a=Math.max(t,n,i),s=NaN,l=a-r,f=(a+r)/2;return l?(t===a?s=(n-i)/l+(n<i)*6:n===a?s=(i-t)/l+2:s=(t-n)/l+4,l/=f<.5?a+r:2-a-r,s*=60):l=f>0&&f<1?0:s,new z(s,l,f,e.opacity)}function Hs(e,t,n,i){return arguments.length===1?xn(e):new z(e,t,n,i??1)}function z(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}mt(z,Hs,_n(Pe,{brighter(e){return e=e==null?Xe:Math.pow(Xe,e),new z(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Re:Math.pow(Re,e),new z(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new L(st(e>=240?e-240:e+120,r,i),st(e,r,i),st(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new z(Bt(this.h),Ue(this.s),Ue(this.l),ze(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ze(this.opacity);return`${e===1?"hsl(":"hsla("}${Bt(this.h)}, ${Ue(this.s)*100}%, ${Ue(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Bt(e){return e=(e||0)%360,e<0?e+360:e}function Ue(e){return Math.max(0,Math.min(1,e||0))}function st(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const wn=e=>()=>e;function Fs(e,t){return function(n){return e+n*t}}function Os(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function Bs(e){return(e=+e)==1?Cn:function(t,n){return n-t?Os(t,n,e):wn(isNaN(t)?n:t)}}function Cn(e,t){var n=t-e;return n?Fs(e,n):wn(isNaN(e)?t:e)}const Xt=function e(t){var n=Bs(t);function i(r,a){var s=n((r=ct(r)).r,(a=ct(a)).r),l=n(r.g,a.g),f=n(r.b,a.b),c=Cn(r.opacity,a.opacity);return function(o){return r.r=s(o),r.g=l(o),r.b=f(o),r.opacity=c(o),r+""}}return i.gamma=e,i}(1);function te(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var ft=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,at=new RegExp(ft.source,"g");function Xs(e){return function(){return e}}function zs(e){return function(t){return e(t)+""}}function Ys(e,t){var n=ft.lastIndex=at.lastIndex=0,i,r,a,s=-1,l=[],f=[];for(e=e+"",t=t+"";(i=ft.exec(e))&&(r=at.exec(t));)(a=r.index)>n&&(a=t.slice(n,a),l[s]?l[s]+=a:l[++s]=a),(i=i[0])===(r=r[0])?l[s]?l[s]+=r:l[++s]=r:(l[++s]=null,f.push({i:s,x:te(i,r)})),n=at.lastIndex;return n<t.length&&(a=t.slice(n),l[s]?l[s]+=a:l[++s]=a),l.length<2?f[0]?zs(f[0].x):Xs(t):(t=f.length,function(c){for(var o=0,h;o<t;++o)l[(h=f[o]).i]=h.x(c);return l.join("")})}var zt=180/Math.PI,ut={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function An(e,t,n,i,r,a){var s,l,f;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(f=e*n+t*i)&&(n-=e*f,i-=t*f),(l=Math.sqrt(n*n+i*i))&&(n/=l,i/=l,f/=l),e*i<t*n&&(e=-e,t=-t,f=-f,s=-s),{translateX:r,translateY:a,rotate:Math.atan2(t,e)*zt,skewX:Math.atan(f)*zt,scaleX:s,scaleY:l}}var $e;function Gs(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?ut:An(t.a,t.b,t.c,t.d,t.e,t.f)}function Ks(e){return e==null||($e||($e=document.createElementNS("http://www.w3.org/2000/svg","g")),$e.setAttribute("transform",e),!(e=$e.transform.baseVal.consolidate()))?ut:(e=e.matrix,An(e.a,e.b,e.c,e.d,e.e,e.f))}function Sn(e,t,n,i){function r(c){return c.length?c.pop()+" ":""}function a(c,o,h,d,u,g){if(c!==h||o!==d){var p=u.push("translate(",null,t,null,n);g.push({i:p-4,x:te(c,h)},{i:p-2,x:te(o,d)})}else(h||d)&&u.push("translate("+h+t+d+n)}function s(c,o,h,d){c!==o?(c-o>180?o+=360:o-c>180&&(c+=360),d.push({i:h.push(r(h)+"rotate(",null,i)-2,x:te(c,o)})):o&&h.push(r(h)+"rotate("+o+i)}function l(c,o,h,d){c!==o?d.push({i:h.push(r(h)+"skewX(",null,i)-2,x:te(c,o)}):o&&h.push(r(h)+"skewX("+o+i)}function f(c,o,h,d,u,g){if(c!==h||o!==d){var p=u.push(r(u)+"scale(",null,",",null,")");g.push({i:p-4,x:te(c,h)},{i:p-2,x:te(o,d)})}else(h!==1||d!==1)&&u.push(r(u)+"scale("+h+","+d+")")}return function(c,o){var h=[],d=[];return c=e(c),o=e(o),a(c.translateX,c.translateY,o.translateX,o.translateY,h,d),s(c.rotate,o.rotate,h,d),l(c.skewX,o.skewX,h,d),f(c.scaleX,c.scaleY,o.scaleX,o.scaleY,h,d),c=o=null,function(u){for(var g=-1,p=d.length,m;++g<p;)h[(m=d[g]).i]=m.x(u);return h.join("")}}}var Ws=Sn(Gs,"px, ","px)","deg)"),Js=Sn(Ks,", ",")",")"),pe=0,_e=0,be=0,Rn=1e3,Ye,xe,Ge=0,ce=0,je=0,Ne=typeof performance=="object"&&performance.now?performance:Date,In=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function vt(){return ce||(In(Qs),ce=Ne.now()+je)}function Qs(){ce=0}function Ke(){this._call=this._time=this._next=null}Ke.prototype=En.prototype={constructor:Ke,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?vt():+n)+(t==null?0:+t),!this._next&&xe!==this&&(xe?xe._next=this:Ye=this,xe=this),this._call=e,this._time=n,ht()},stop:function(){this._call&&(this._call=null,this._time=1/0,ht())}};function En(e,t,n){var i=new Ke;return i.restart(e,t,n),i}function Zs(){vt(),++pe;for(var e=Ye,t;e;)(t=ce-e._time)>=0&&e._call.call(void 0,t),e=e._next;--pe}function Yt(){ce=(Ge=Ne.now())+je,pe=_e=0;try{Zs()}finally{pe=0,ea(),ce=0}}function js(){var e=Ne.now(),t=e-Ge;t>Rn&&(je-=t,Ge=e)}function ea(){for(var e,t=Ye,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Ye=n);xe=e,ht(i)}function ht(e){if(!pe){_e&&(_e=clearTimeout(_e));var t=e-ce;t>24?(e<1/0&&(_e=setTimeout(Yt,e-Ne.now()-je)),be&&(be=clearInterval(be))):(be||(Ge=Ne.now(),be=setInterval(js,Rn)),pe=1,In(Yt))}}function Gt(e,t,n){var i=new Ke;return t=t==null?0:+t,i.restart(r=>{i.stop(),e(r+t)},t,n),i}var ta=on("start","end","cancel","interrupt"),na=[],Nn=0,Kt=1,dt=2,He=3,Wt=4,gt=5,Fe=6;function et(e,t,n,i,r,a){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;ia(e,n,{name:t,index:i,group:r,on:ta,tween:na,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Nn})}function bt(e,t){var n=Y(e,t);if(n.state>Nn)throw new Error("too late; already scheduled");return n}function K(e,t){var n=Y(e,t);if(n.state>He)throw new Error("too late; already running");return n}function Y(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function ia(e,t,n){var i=e.__transition,r;i[t]=n,n.timer=En(a,0,n.time);function a(c){n.state=Kt,n.timer.restart(s,n.delay,n.time),n.delay<=c&&s(c-n.delay)}function s(c){var o,h,d,u;if(n.state!==Kt)return f();for(o in i)if(u=i[o],u.name===n.name){if(u.state===He)return Gt(s);u.state===Wt?(u.state=Fe,u.timer.stop(),u.on.call("interrupt",e,e.__data__,u.index,u.group),delete i[o]):+o<t&&(u.state=Fe,u.timer.stop(),u.on.call("cancel",e,e.__data__,u.index,u.group),delete i[o])}if(Gt(function(){n.state===He&&(n.state=Wt,n.timer.restart(l,n.delay,n.time),l(c))}),n.state=dt,n.on.call("start",e,e.__data__,n.index,n.group),n.state===dt){for(n.state=He,r=new Array(d=n.tween.length),o=0,h=-1;o<d;++o)(u=n.tween[o].value.call(e,e.__data__,n.index,n.group))&&(r[++h]=u);r.length=h+1}}function l(c){for(var o=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(f),n.state=gt,1),h=-1,d=r.length;++h<d;)r[h].call(e,o);n.state===gt&&(n.on.call("end",e,e.__data__,n.index,n.group),f())}function f(){n.state=Fe,n.timer.stop(),delete i[t];for(var c in i)return;delete e.__transition}}function ra(e,t){var n=e.__transition,i,r,a=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((i=n[s]).name!==t){a=!1;continue}r=i.state>dt&&i.state<gt,i.state=Fe,i.timer.stop(),i.on.call(r?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete n[s]}a&&delete e.__transition}}function sa(e){return this.each(function(){ra(this,e)})}function aa(e,t){var n,i;return function(){var r=K(this,e),a=r.tween;if(a!==n){i=n=a;for(var s=0,l=i.length;s<l;++s)if(i[s].name===t){i=i.slice(),i.splice(s,1);break}}r.tween=i}}function oa(e,t,n){var i,r;if(typeof n!="function")throw new Error;return function(){var a=K(this,e),s=a.tween;if(s!==i){r=(i=s).slice();for(var l={name:t,value:n},f=0,c=r.length;f<c;++f)if(r[f].name===t){r[f]=l;break}f===c&&r.push(l)}a.tween=r}}function la(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i=Y(this.node(),n).tween,r=0,a=i.length,s;r<a;++r)if((s=i[r]).name===e)return s.value;return null}return this.each((t==null?aa:oa)(n,e,t))}function _t(e,t,n){var i=e._id;return e.each(function(){var r=K(this,i);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return Y(r,i).value[t]}}function kn(e,t){var n;return(typeof t=="number"?te:t instanceof Ee?Xt:(n=Ee(t))?(t=n,Xt):Ys)(e,t)}function ca(e){return function(){this.removeAttribute(e)}}function fa(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ua(e,t,n){var i,r=n+"",a;return function(){var s=this.getAttribute(e);return s===r?null:s===i?a:a=t(i=s,n)}}function ha(e,t,n){var i,r=n+"",a;return function(){var s=this.getAttributeNS(e.space,e.local);return s===r?null:s===i?a:a=t(i=s,n)}}function da(e,t,n){var i,r,a;return function(){var s,l=n(this),f;return l==null?void this.removeAttribute(e):(s=this.getAttribute(e),f=l+"",s===f?null:s===i&&f===r?a:(r=f,a=t(i=s,l)))}}function ga(e,t,n){var i,r,a;return function(){var s,l=n(this),f;return l==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),f=l+"",s===f?null:s===i&&f===r?a:(r=f,a=t(i=s,l)))}}function ya(e,t){var n=Ze(e),i=n==="transform"?Js:kn;return this.attrTween(e,typeof t=="function"?(n.local?ga:da)(n,i,_t(this,"attr."+e,t)):t==null?(n.local?fa:ca)(n):(n.local?ha:ua)(n,i,t))}function pa(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function ma(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function va(e,t){var n,i;function r(){var a=t.apply(this,arguments);return a!==i&&(n=(i=a)&&ma(e,a)),n}return r._value=t,r}function ba(e,t){var n,i;function r(){var a=t.apply(this,arguments);return a!==i&&(n=(i=a)&&pa(e,a)),n}return r._value=t,r}function _a(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var i=Ze(e);return this.tween(n,(i.local?va:ba)(i,t))}function xa(e,t){return function(){bt(this,e).delay=+t.apply(this,arguments)}}function wa(e,t){return t=+t,function(){bt(this,e).delay=t}}function Ca(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?xa:wa)(t,e)):Y(this.node(),t).delay}function Aa(e,t){return function(){K(this,e).duration=+t.apply(this,arguments)}}function Sa(e,t){return t=+t,function(){K(this,e).duration=t}}function Ra(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Aa:Sa)(t,e)):Y(this.node(),t).duration}function Ia(e,t){if(typeof t!="function")throw new Error;return function(){K(this,e).ease=t}}function Ea(e){var t=this._id;return arguments.length?this.each(Ia(t,e)):Y(this.node(),t).ease}function Na(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;K(this,e).ease=n}}function ka(e){if(typeof e!="function")throw new Error;return this.each(Na(this._id,e))}function Pa(e){typeof e!="function"&&(e=fn(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var a=t[r],s=a.length,l=i[r]=[],f,c=0;c<s;++c)(f=a[c])&&e.call(f,f.__data__,c,a)&&l.push(f);return new J(i,this._parents,this._name,this._id)}function Ma(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,r=n.length,a=Math.min(i,r),s=new Array(i),l=0;l<a;++l)for(var f=t[l],c=n[l],o=f.length,h=s[l]=new Array(o),d,u=0;u<o;++u)(d=f[u]||c[u])&&(h[u]=d);for(;l<i;++l)s[l]=t[l];return new J(s,this._parents,this._name,this._id)}function qa(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Va(e,t,n){var i,r,a=qa(t)?bt:K;return function(){var s=a(this,e),l=s.on;l!==i&&(r=(i=l).copy()).on(t,n),s.on=r}}function Ta(e,t){var n=this._id;return arguments.length<2?Y(this.node(),n).on.on(e):this.each(Va(n,e,t))}function Ua(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function $a(){return this.on("end.remove",Ua(this._id))}function Da(e){var t=this._name,n=this._id;typeof e!="function"&&(e=yt(e));for(var i=this._groups,r=i.length,a=new Array(r),s=0;s<r;++s)for(var l=i[s],f=l.length,c=a[s]=new Array(f),o,h,d=0;d<f;++d)(o=l[d])&&(h=e.call(o,o.__data__,d,l))&&("__data__"in o&&(h.__data__=o.__data__),c[d]=h,et(c[d],t,n,d,c,Y(o,n)));return new J(a,this._parents,t,n)}function La(e){var t=this._name,n=this._id;typeof e!="function"&&(e=cn(e));for(var i=this._groups,r=i.length,a=[],s=[],l=0;l<r;++l)for(var f=i[l],c=f.length,o,h=0;h<c;++h)if(o=f[h]){for(var d=e.call(o,o.__data__,h,f),u,g=Y(o,n),p=0,m=d.length;p<m;++p)(u=d[p])&&et(u,t,n,p,d,g);a.push(d),s.push(o)}return new J(a,s,t,n)}var Ha=ke.prototype.constructor;function Fa(){return new Ha(this._groups,this._parents)}function Oa(e,t){var n,i,r;return function(){var a=ye(this,e),s=(this.style.removeProperty(e),ye(this,e));return a===s?null:a===n&&s===i?r:r=t(n=a,i=s)}}function Pn(e){return function(){this.style.removeProperty(e)}}function Ba(e,t,n){var i,r=n+"",a;return function(){var s=ye(this,e);return s===r?null:s===i?a:a=t(i=s,n)}}function Xa(e,t,n){var i,r,a;return function(){var s=ye(this,e),l=n(this),f=l+"";return l==null&&(f=l=(this.style.removeProperty(e),ye(this,e))),s===f?null:s===i&&f===r?a:(r=f,a=t(i=s,l))}}function za(e,t){var n,i,r,a="style."+t,s="end."+a,l;return function(){var f=K(this,e),c=f.on,o=f.value[a]==null?l||(l=Pn(t)):void 0;(c!==n||r!==o)&&(i=(n=c).copy()).on(s,r=o),f.on=i}}function Ya(e,t,n){var i=(e+="")=="transform"?Ws:kn;return t==null?this.styleTween(e,Oa(e,i)).on("end.style."+e,Pn(e)):typeof t=="function"?this.styleTween(e,Xa(e,i,_t(this,"style."+e,t))).each(za(this._id,e)):this.styleTween(e,Ba(e,i,t),n).on("end.style."+e,null)}function Ga(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}function Ka(e,t,n){var i,r;function a(){var s=t.apply(this,arguments);return s!==r&&(i=(r=s)&&Ga(e,s,n)),i}return a._value=t,a}function Wa(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,Ka(e,t,n??""))}function Ja(e){return function(){this.textContent=e}}function Qa(e){return function(){var t=e(this);this.textContent=t??""}}function Za(e){return this.tween("text",typeof e=="function"?Qa(_t(this,"text",e)):Ja(e==null?"":e+""))}function ja(e){return function(t){this.textContent=e.call(this,t)}}function eo(e){var t,n;function i(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&ja(r)),t}return i._value=e,i}function to(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,eo(e))}function no(){for(var e=this._name,t=this._id,n=Mn(),i=this._groups,r=i.length,a=0;a<r;++a)for(var s=i[a],l=s.length,f,c=0;c<l;++c)if(f=s[c]){var o=Y(f,t);et(f,e,n,c,s,{time:o.time+o.delay+o.duration,delay:0,duration:o.duration,ease:o.ease})}return new J(i,this._parents,e,n)}function io(){var e,t,n=this,i=n._id,r=n.size();return new Promise(function(a,s){var l={value:s},f={value:function(){--r===0&&a()}};n.each(function(){var c=K(this,i),o=c.on;o!==e&&(t=(e=o).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(f)),c.on=t}),r===0&&a()})}var ro=0;function J(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function Mn(){return++ro}var W=ke.prototype;J.prototype={constructor:J,select:Da,selectAll:La,selectChild:W.selectChild,selectChildren:W.selectChildren,filter:Pa,merge:Ma,selection:Fa,transition:no,call:W.call,nodes:W.nodes,node:W.node,size:W.size,empty:W.empty,each:W.each,on:Ta,attr:ya,attrTween:_a,style:Ya,styleTween:Wa,text:Za,textTween:to,remove:$a,tween:la,delay:Ca,duration:Ra,ease:Ea,easeVarying:ka,end:io,[Symbol.iterator]:W[Symbol.iterator]};function we(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var so={time:null,delay:0,duration:250,ease:we};function ao(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function oo(e){var t,n;e instanceof J?(t=e._id,e=e._name):(t=Mn(),(n=so).time=vt(),e=e==null?null:e+"");for(var i=this._groups,r=i.length,a=0;a<r;++a)for(var s=i[a],l=s.length,f,c=0;c<l;++c)(f=s[c])&&et(f,e,t,c,s,n||ao(f,t));return new J(i,this._parents,e,t)}ke.prototype.interrupt=sa;ke.prototype.transition=oo;function Ce(e,t,n){this.k=e,this.x=t,this.y=n}Ce.prototype={constructor:Ce,scale:function(e){return e===1?this:new Ce(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Ce(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Ce.prototype;function lo(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var De={};/**
 * k-d Tree JavaScript - V 1.01
 *
 * https://github.com/ubilabs/kd-tree-javascript
 *
 * @author Mircea Pricop <pricop@ubilabs.net>, 2012
 * @author Martin Kleppe <kleppe@ubilabs.net>, 2012
 * @author Ubilabs http://ubilabs.net, 2012
 * @license MIT License <http://www.opensource.org/licenses/mit-license.php>
 */var Jt;function co(){return Jt||(Jt=1,function(e){(function(t,n){n(e)})(De,function(t){function n(r,a,s){this.obj=r,this.left=null,this.right=null,this.parent=s,this.dimension=a}function i(r){this.content=[],this.scoreFunction=r}i.prototype={push:function(r){this.content.push(r),this.bubbleUp(this.content.length-1)},pop:function(){var r=this.content[0],a=this.content.pop();return this.content.length>0&&(this.content[0]=a,this.sinkDown(0)),r},peek:function(){return this.content[0]},remove:function(r){for(var a=this.content.length,s=0;s<a;s++)if(this.content[s]==r){var l=this.content.pop();return void(s!=a-1&&(this.content[s]=l,this.scoreFunction(l)<this.scoreFunction(r)?this.bubbleUp(s):this.sinkDown(s)))}throw new Error("Node not found.")},size:function(){return this.content.length},bubbleUp:function(r){for(var a=this.content[r];r>0;){var s=Math.floor((r+1)/2)-1,l=this.content[s];if(!(this.scoreFunction(a)<this.scoreFunction(l)))break;this.content[s]=a,this.content[r]=l,r=s}},sinkDown:function(r){for(var a=this.content.length,s=this.content[r],l=this.scoreFunction(s);;){var f=2*(r+1),c=f-1,o=null;if(c<a){var h=this.content[c],d=this.scoreFunction(h);d<l&&(o=c)}if(f<a){var u=this.content[f];this.scoreFunction(u)<(o==null?l:d)&&(o=f)}if(o==null)break;this.content[r]=this.content[o],this.content[o]=s,r=o}}},t.kdTree=function(r,a,s){function l(c,o,h){var d,u,g=o%s.length;return c.length===0?null:c.length===1?new n(c[0],g,h):(c.sort(function(p,m){return p[s[g]]-m[s[g]]}),d=Math.floor(c.length/2),u=new n(c[d],g,h),u.left=l(c.slice(0,d),o+1,u),u.right=l(c.slice(d+1),o+1,u),u)}var f=this;Array.isArray(r)?this.root=l(r,0,null):function(c){function o(h){h.left&&(h.left.parent=h,o(h.left)),h.right&&(h.right.parent=h,o(h.right))}f.root=c,o(f.root)}(r),this.toJSON=function(c){c||(c=this.root);var o=new n(c.obj,c.dimension,null);return c.left&&(o.left=f.toJSON(c.left)),c.right&&(o.right=f.toJSON(c.right)),o},this.insert=function(c){function o(g,p){if(g===null)return p;var m=s[g.dimension];return c[m]<g.obj[m]?o(g.left,g):o(g.right,g)}var h,d,u=o(this.root,null);u!==null?(h=new n(c,(u.dimension+1)%s.length,u),d=s[u.dimension],c[d]<u.obj[d]?u.left=h:u.right=h):this.root=new n(c,0,null)},this.remove=function(c){function o(u){if(u===null)return null;if(u.obj===c)return u;var g=s[u.dimension];return c[g]<u.obj[g]?o(u.left):o(u.right)}function h(u){function g(b,x){var S,w,N,C,k;return b===null?null:(S=s[x],b.dimension===x?b.left!==null?g(b.left,x):b:(w=b.obj[S],N=g(b.left,x),C=g(b.right,x),k=b,N!==null&&N.obj[S]<w&&(k=N),C!==null&&C.obj[S]<k.obj[S]&&(k=C),k))}var p,m,v;if(u.left===null&&u.right===null)return u.parent===null?void(f.root=null):(v=s[u.parent.dimension],void(u.obj[v]<u.parent.obj[v]?u.parent.left=null:u.parent.right=null));u.right!==null?(m=(p=g(u.right,u.dimension)).obj,h(p),u.obj=m):(m=(p=g(u.left,u.dimension)).obj,h(p),u.right=u.left,u.left=null,u.obj=m)}var d;(d=o(f.root))!==null&&h(d)},this.nearest=function(c,o,h){function d(m){function v(B,H){p.push([B,H]),p.size()>o&&p.pop()}var b,x,S,w,N=s[m.dimension],C=a(c,m.obj),k={};for(w=0;w<s.length;w+=1)w===m.dimension?k[s[w]]=c[s[w]]:k[s[w]]=m.obj[s[w]];x=a(k,m.obj),m.right!==null||m.left!==null?(d(b=m.right===null?m.left:m.left===null?m.right:c[N]<m.obj[N]?m.left:m.right),(p.size()<o||C<p.peek()[1])&&v(m,C),(p.size()<o||Math.abs(x)<p.peek()[1])&&(S=b===m.left?m.right:m.left)!==null&&d(S)):(p.size()<o||C<p.peek()[1])&&v(m,C)}var u,g,p;if(p=new i(function(m){return-m[1]}),h)for(u=0;u<o;u+=1)p.push([null,h]);for(f.root&&d(f.root),g=[],u=0;u<Math.min(o,p.content.length);u+=1)p.content[u][0]&&g.push([p.content[u][0].obj,p.content[u][1]]);return g},this.balanceFactor=function(){function c(h){return h===null?0:Math.max(c(h.left),c(h.right))+1}function o(h){return h===null?0:o(h.left)+o(h.right)+1}return c(f.root)/(Math.log(o(f.root))/Math.log(2))}},t.BinaryHeap=i})}(De)),De}var fo=co();const uo=lo(fo);var ho=se('<div class="tooltip svelte-1medp9i"><!></div>'),go=se('<div class="chart-container svelte-1medp9i"><svg class="chart-svg svelte-1medp9i"></svg> <!></div>');function yo(e,t){Je(t,!1);let n=F(t,"width",8),i=F(t,"height",8),r=F(t,"quantitativeColumns",24,()=>new Set);const a=[];let s=F(t,"selectedCities",24,()=>[]),l=M(),f=M(),c,o,h,d,u,g,p,m,v,b=M(!1),x=M(0),S=M(0),w=M(""),N=null,C=null,k=M(""),B=M(0),H=M(!1);const Q=1e3,me={top:20};let $=M(0);const qn=(_,R)=>{const U=_.x-R.x,V=_.y-R.y;return Math.sqrt(U*U+V*V)};function Vn(){if(!y(f))return;const _=Tt(y(f));_.selectAll("*").remove(),y(f).setAttribute("width",`${n()}`),y(f).setAttribute("height",`${i()}`),c=_.append("g").attr("transform",`translate(${n()/2},${i()/2})`),o=c.append("g").attr("class","background-layer"),d=o.append("g").attr("class","background-axes-layer"),h=o.append("g").attr("class","background-grid-layer"),u=o.append("g").attr("class","background-polygon-layer"),g=o.append("g").attr("class","background-circle-highlight-layer"),p=c.append("g").attr("class","front-layer"),m=p.append("g").attr("class","front-polygon-layer"),v=p.append("g").attr("class","front-circle-layer"),c.append("g").attr("class","legend-group")}function Tn(){if(!c||r().size===0)return;const _=[...r()],R=Math.PI*2/_.length,U=5;E($,Math.min(n(),i())/2-me.top),h.selectAll("circle").data(Array.from({length:U},(V,A)=>(A+1)/U)).join("circle").attr("r",V=>y($)*V).attr("fill","none").attr("stroke","#888888").attr("stroke-width",.5),_.forEach((V,A)=>{d.append("line").attr("x1",0).attr("y1",0).attr("x2",y($)*Math.cos(R*A-Math.PI/2)).attr("y2",y($)*Math.sin(R*A-Math.PI/2)).attr("stroke","#888888").attr("stroke-width",.5)}),d.selectAll("text.axis-label").remove(),g.selectAll("circle").data([null]).join("circle").attr("r",16).attr("fill","none").attr("fill-opacity",0).attr("pointer-events","none"),_.forEach((V,A)=>{const D=R*A-Math.PI/2,P=y($)+18;d.append("text").attr("class","axis-label").attr("x",P*Math.cos(D)).attr("y",P*Math.sin(D)).attr("dy","0.35em").attr("text-anchor",()=>D>-Math.PI/2&&D<Math.PI/2?"start":D>Math.PI/2||D<-Math.PI/2?"end":"middle").text(V.replace(/_/g," "))})}function xt(){if(!o||!p||r().size===0)return;const _=[...r()],R=Math.PI*2/_.length,U=u.selectAll("polygon").data(s());U.exit().transition().duration(Q).attr("points",_.map(()=>"0,0").join(" ")).remove();const V=U.enter().append("polygon").attr("data-city",I=>I.City).attr("class","background-city-polygon").attr("points",_.map(()=>"0,0").join(" ")).attr("fill",I=>Ve[I.Region]||"#999").attr("fill-opacity",0);U.merge(V).transition().duration(Q).attr("points",I=>_.map((fe,Z)=>{const j=Number(I[fe]||0)/100;return[y($)*j*Math.cos(R*Z-Math.PI/2),y($)*j*Math.sin(R*Z-Math.PI/2)].join(",")}).join(" "));const A=m.selectAll("polygon").data(s());A.exit().transition().duration(Q).attr("points",_.map(()=>"0,0").join(" ")).remove();const D=A.enter().append("polygon").attr("data-city",I=>I.City).attr("class","front-city-polygon").attr("points",_.map(()=>"0,0").join(" ")).attr("fill","none").attr("stroke",I=>Ve[I.Region]||"#999").attr("stroke-width",3);A.merge(D).transition().duration(Q).attr("points",I=>_.map((fe,Z)=>{const j=Number(I[fe]||0)/100;return[y($)*j*Math.cos(R*Z-Math.PI/2),y($)*j*Math.sin(R*Z-Math.PI/2)].join(",")}).join(" "));const P=s().flatMap(I=>_.map((fe,Z)=>{const j=Number(I[fe]||0)/100;return{city:I.City,metric:fe,x:y($)*j*Math.cos(R*Z-Math.PI/2),y:y($)*j*Math.sin(R*Z-Math.PI/2),color:Ve[I.Region]||"#999"}})),tt=v.selectAll("circle").data(P);tt.exit().transition().duration(Q/2).attr("r",0).attr("cx",0).attr("cy",0).remove();const Ln=tt.enter().append("circle").attr("data-city",I=>I.city).attr("class","front-circle").attr("r",8).attr("fill",I=>I.color).attr("cx",0).attr("cy",0);tt.merge(Ln).transition().duration(Q).attr("r",8).attr("cx",I=>I.x).attr("cy",I=>I.y),Un()}function Un(){const _=[...r()],R=Math.PI*2/_.length,U=s().flatMap(V=>_.map((A,D)=>{const P=Number(V[A]||0)/100;return{city:V.City,metric:A,value:P,x:y($)*P*Math.cos(R*D-Math.PI/2),y:y($)*P*Math.sin(R*D-Math.PI/2),color:Ve[V.Region]||"#999"}}));N=new uo.kdTree(U,qn,["x","y"])}nn(()=>{Tt(y(f)).on("mousemove",_=>{if(!N||!y(H))return;const[R,U]=Es(_,c.node()),V=N.nearest({x:R,y:U},1);if(V.length>0){const A=V[0][0];if(C!==A.city){C=A.city,E(k,A.metric),E(B,A.value),m.selectAll("polygon.front-city-polygon").transition().duration(150).ease(we).attr("stroke-opacity",P=>P.City===A.city?1:.3).attr("fill-opacity",P=>P.City===A.city?.3:.1).attr("stroke-width",P=>P.City===A.city?4:2),u.selectAll("polygon.background-city-polygon").transition().duration(150).attr("fill-opacity",P=>P.City===A.city?.3:0),g.selectAll("circle").transition().duration(150).attr("cx",A.x).attr("cy",A.y).attr("r",16).attr("stroke",A.color).attr("stroke-width",3).attr("fill","none").attr("fill-opacity",.2).attr("pointer-events","none"),v.selectAll("circle.front-circle").transition().duration(150).attr("fill-opacity",P=>P.city===A.city?1:.3);const D=y(f).getBoundingClientRect();E(x,D.left+n()/2+A.x),E(S,D.top+i()/2+A.y),E(w,A.city),E(b,!0)}}}).on("mouseleave",()=>{C=null,E(b,!1),m.selectAll("polygon.front-city-polygon").transition().duration(150).ease(we).attr("stroke-opacity",1).attr("fill-opacity",.1).attr("stroke-width",3),u.selectAll("polygon.background-city-polygon").transition().duration(150).ease(we).attr("fill-opacity",0),v.selectAll("circle.front-circle").transition().duration(150).ease(we).attr("fill-opacity",1),g.selectAll("circle").transition().duration(150).attr("r",0).attr("stroke","none").attr("cx",0).attr("cy",0)})}),Ae(()=>(y(f),he(n()),he(i())),()=>{y(f)&&n()>0&&i()>0&&(E($,Math.min(n(),i())/2-60),Vn(),E(H,!1),Tn(),xt(),setTimeout(()=>{E(H,!0)},1e3))}),Ae(()=>(y(f),he(s())),()=>{y(f)&&s()&&(E(H,!1),xt(),setTimeout(()=>{E(H,!0)},1e3))}),tn(),We();var Me=go(),qe=T(Me);ot(qe,_=>E(f,_),()=>y(f));var $n=ne(qe,2);{var Dn=_=>{var R=ho(),U=T(R);zi(U,{get cityName(){return y(w)},get metricName(){return y(k)},get metricValue(){return y(B)}}),q(R),ge(()=>sn(R,`
      left: ${y(x)??""}px;
      top: ${y(S)??""}px;
      transition: left 0.2s cubic-bezier(0.4,0,0.2,1), top 0.2s cubic-bezier(0.4,0,0.2,1);
      `)),re(_,R)};di($n,_=>{y(b)&&_(Dn)})}return q(Me),ot(Me,_=>E(l,_),()=>y(l)),ge(()=>{ie(qe,"width",n()),ie(qe,"height",i())}),re(e,Me),Ci(t,"citiesData",a),Qe({citiesData:a})}const ue=JSON.parse('[{"City":"Global","Economic strength":54.52,"Peace and Stability":53.67,"Vibrancy of city":62.16,"Climate disaster preparedness":46.64,"Improving quality of life":51.24,"Investing in neighborhoods":48.12,"Addressing homelessness":36.42,"Reducing crime":42.54,"visible":true,"Region":"Global","US":false},{"City":"Abu Dhabi","Economic strength":90.24,"Peace and Stability":92.6,"Vibrancy of city":88.84,"Climate disaster preparedness":81.88,"Improving quality of life":89.34,"Investing in neighborhoods":86.46,"Addressing homelessness":83.8,"Reducing crime":94.09,"visible":true,"Region":"Middle East","US":false},{"City":"Amsterdam","Economic strength":60.97,"Peace and Stability":56.52,"Vibrancy of city":75.66,"Climate disaster preparedness":46.9,"Improving quality of life":53.29,"Investing in neighborhoods":56.81,"Addressing homelessness":37.85,"Reducing crime":38.4,"visible":true,"Region":"Europe","US":false},{"City":"Athens","Economic strength":28.22,"Peace and Stability":42.86,"Vibrancy of city":51.12,"Climate disaster preparedness":19.59,"Improving quality of life":28.17,"Investing in neighborhoods":25.1,"Addressing homelessness":20.12,"Reducing crime":21.13,"visible":false,"Region":"Europe","US":false},{"City":"Atlanta","Economic strength":50.97,"Peace and Stability":47.82,"Vibrancy of city":62.89,"Climate disaster preparedness":41.28,"Improving quality of life":47.03,"Investing in neighborhoods":46.85,"Addressing homelessness":28.88,"Reducing crime":38.59,"visible":true,"Region":"North America","US":true},{"City":"Austin","Economic strength":60.25,"Peace and Stability":50.83,"Vibrancy of city":61.76,"Climate disaster preparedness":40.47,"Improving quality of life":48.53,"Investing in neighborhoods":43.75,"Addressing homelessness":28.97,"Reducing crime":34.26,"visible":false,"Region":"North America","US":true},{"City":"Baltimore","Economic strength":31.25,"Peace and Stability":27.84,"Vibrancy of city":37.37,"Climate disaster preparedness":34.04,"Improving quality of life":31.19,"Investing in neighborhoods":30.43,"Addressing homelessness":18.64,"Reducing crime":23.87,"visible":false,"Region":"North America","US":true},{"City":"Bangalore","Economic strength":84.8,"Peace and Stability":77.03,"Vibrancy of city":82.73,"Climate disaster preparedness":69.48,"Improving quality of life":81.4,"Investing in neighborhoods":76,"Addressing homelessness":63.97,"Reducing crime":67,"visible":true,"Region":"Asia Pacific","US":false},{"City":"Bangkok","Economic strength":55.42,"Peace and Stability":65.53,"Vibrancy of city":74.21,"Climate disaster preparedness":58.55,"Improving quality of life":64.33,"Investing in neighborhoods":64.72,"Addressing homelessness":48.26,"Reducing crime":53.52,"visible":false,"Region":"Asia Pacific","US":false},{"City":"Barcelona","Economic strength":44.85,"Peace and Stability":41.15,"Vibrancy of city":57.44,"Climate disaster preparedness":30.3,"Improving quality of life":39.48,"Investing in neighborhoods":32.93,"Addressing homelessness":20.08,"Reducing crime":28.46,"visible":false,"Region":"Europe","US":false},{"City":"Beijing","Economic strength":89.09,"Peace and Stability":89.54,"Vibrancy of city":88.71,"Climate disaster preparedness":88.96,"Improving quality of life":87.68,"Investing in neighborhoods":84.06,"Addressing homelessness":82.89,"Reducing crime":91.06,"visible":false,"Region":"Asia Pacific","US":false},{"City":"Berlin","Economic strength":41.72,"Peace and Stability":43.29,"Vibrancy of city":70.16,"Climate disaster preparedness":36.38,"Improving quality of life":37.6,"Investing in neighborhoods":34.72,"Addressing homelessness":27.01,"Reducing crime":28.48,"visible":false,"Region":"Europe","US":false},{"City":"Birmingham","Economic strength":46.46,"Peace and Stability":45.13,"Vibrancy of city":56.52,"Climate disaster preparedness":42.08,"Improving quality of life":46.06,"Investing in neighborhoods":41.81,"Addressing homelessness":34.11,"Reducing crime":35.28,"visible":false,"Region":"Europe","US":false},{"City":"Bogot","Economic strength":32.93,"Peace and Stability":26.84,"Vibrancy of city":40.29,"Climate disaster preparedness":28.74,"Improving quality of life":33.27,"Investing in neighborhoods":29.4,"Addressing homelessness":28.8,"Reducing crime":15.54,"visible":true,"Region":"Latin/South America","US":false},{"City":"Boston","Economic strength":52.52,"Peace and Stability":58.8,"Vibrancy of city":59.03,"Climate disaster preparedness":44.19,"Improving quality of life":48.13,"Investing in neighborhoods":46.27,"Addressing homelessness":28.71,"Reducing crime":45.67,"visible":false,"Region":"North America","US":true},{"City":"Cairo","Economic strength":67.4,"Peace and Stability":77.76,"Vibrancy of city":79.04,"Climate disaster preparedness":64.71,"Improving quality of life":72.75,"Investing in neighborhoods":71.89,"Addressing homelessness":63.75,"Reducing crime":71.31,"visible":false,"Region":"Middle East","US":false},{"City":"Charlotte","Economic strength":51.79,"Peace and Stability":46.5,"Vibrancy of city":60.26,"Climate disaster preparedness":41.38,"Improving quality of life":45.49,"Investing in neighborhoods":40.39,"Addressing homelessness":24.67,"Reducing crime":35.84,"visible":false,"Region":"North America","US":true},{"City":"Chicago","Economic strength":44.86,"Peace and Stability":39.8,"Vibrancy of city":60.77,"Climate disaster preparedness":42.46,"Improving quality of life":43.47,"Investing in neighborhoods":40.66,"Addressing homelessness":23.93,"Reducing crime":25.4,"visible":false,"Region":"North America","US":true},{"City":"Columbus","Economic strength":45.77,"Peace and Stability":45.88,"Vibrancy of city":52.58,"Climate disaster preparedness":37.61,"Improving quality of life":42.74,"Investing in neighborhoods":38.67,"Addressing homelessness":29.62,"Reducing crime":34.21,"visible":false,"Region":"North America","US":true},{"City":"Dallas","Economic strength":54.94,"Peace and Stability":49.9,"Vibrancy of city":58.21,"Climate disaster preparedness":38.9,"Improving quality of life":48.3,"Investing in neighborhoods":43.75,"Addressing homelessness":26.04,"Reducing crime":38.46,"visible":false,"Region":"North America","US":true},{"City":"Delhi","Economic strength":80.96,"Peace and Stability":72.64,"Vibrancy of city":76.29,"Climate disaster preparedness":64.33,"Improving quality of life":78.24,"Investing in neighborhoods":71.23,"Addressing homelessness":66.13,"Reducing crime":66.4,"visible":false,"Region":"Asia Pacific","US":false},{"City":"Denver","Economic strength":40.46,"Peace and Stability":39.17,"Vibrancy of city":49.07,"Climate disaster preparedness":38.54,"Improving quality of life":35.16,"Investing in neighborhoods":35.96,"Addressing homelessness":21.38,"Reducing crime":27.04,"visible":false,"Region":"North America","US":true},{"City":"Detroit","Economic strength":51.57,"Peace and Stability":49.9,"Vibrancy of city":62.84,"Climate disaster preparedness":43.06,"Improving quality of life":52.11,"Investing in neighborhoods":50.63,"Addressing homelessness":35.55,"Reducing crime":43.59,"visible":false,"Region":"North America","US":true},{"City":"Dubai","Economic strength":88.58,"Peace and Stability":92.42,"Vibrancy of city":89.47,"Climate disaster preparedness":73.43,"Improving quality of life":88.62,"Investing in neighborhoods":84.5,"Addressing homelessness":77.82,"Reducing crime":91.95,"visible":false,"Region":"Middle East","US":false},{"City":"Ho Chi Minh City","Economic strength":84.91,"Peace and Stability":87.62,"Vibrancy of city":87.98,"Climate disaster preparedness":69.31,"Improving quality of life":78.43,"Investing in neighborhoods":81.34,"Addressing homelessness":61.81,"Reducing crime":66.19,"visible":false,"Region":"Asia Pacific","US":false},{"City":"Hong Kong","Economic strength":51.72,"Peace and Stability":59.51,"Vibrancy of city":53.85,"Climate disaster preparedness":51.55,"Improving quality of life":53.41,"Investing in neighborhoods":48.66,"Addressing homelessness":45.23,"Reducing crime":58.33,"visible":false,"Region":"Asia Pacific","US":false},{"City":"Houston","Economic strength":51.65,"Peace and Stability":45.03,"Vibrancy of city":56.7,"Climate disaster preparedness":32.71,"Improving quality of life":42.83,"Investing in neighborhoods":38.2,"Addressing homelessness":26.76,"Reducing crime":33.2,"visible":false,"Region":"North America","US":true},{"City":"Istanbul","Economic strength":41.63,"Peace and Stability":48.74,"Vibrancy of city":69.94,"Climate disaster preparedness":34.18,"Improving quality of life":44.58,"Investing in neighborhoods":41.86,"Addressing homelessness":36.52,"Reducing crime":37.55,"visible":false,"Region":"Middle East","US":false},{"City":"Johannesburg","Economic strength":37.22,"Peace and Stability":32.06,"Vibrancy of city":49.9,"Climate disaster preparedness":25.37,"Improving quality of life":34,"Investing in neighborhoods":30.38,"Addressing homelessness":20,"Reducing crime":18.44,"visible":true,"Region":"Africa","US":false},{"City":"Lagos","Economic strength":48.1,"Peace and Stability":53.88,"Vibrancy of city":72.4,"Climate disaster preparedness":39.39,"Improving quality of life":46.52,"Investing in neighborhoods":46.09,"Addressing homelessness":28.83,"Reducing crime":41.75,"visible":false,"Region":"Africa","US":false},{"City":"Las Vegas","Economic strength":51.15,"Peace and Stability":41.16,"Vibrancy of city":61.4,"Climate disaster preparedness":35.17,"Improving quality of life":39.92,"Investing in neighborhoods":39.19,"Addressing homelessness":20.42,"Reducing crime":30.69,"visible":false,"Region":"North America","US":true},{"City":"London","Economic strength":49.89,"Peace and Stability":46.28,"Vibrancy of city":63.2,"Climate disaster preparedness":39.9,"Improving quality of life":45.17,"Investing in neighborhoods":38.23,"Addressing homelessness":30.55,"Reducing crime":33.47,"visible":false,"Region":"Europe","US":false},{"City":"Los Angeles","Economic strength":44.84,"Peace and Stability":43.85,"Vibrancy of city":46.71,"Climate disaster preparedness":41.06,"Improving quality of life":41.98,"Investing in neighborhoods":39.91,"Addressing homelessness":26.79,"Reducing crime":33.4,"visible":false,"Region":"North America","US":true},{"City":"Manila","Economic strength":52.41,"Peace and Stability":52.38,"Vibrancy of city":59.32,"Climate disaster preparedness":44.49,"Improving quality of life":50.2,"Investing in neighborhoods":46.04,"Addressing homelessness":30.52,"Reducing crime":39.88,"visible":false,"Region":"Asia Pacific","US":false},{"City":"Mexico City","Economic strength":42.83,"Peace and Stability":36.38,"Vibrancy of city":50.3,"Climate disaster preparedness":34.01,"Improving quality of life":45.44,"Investing in neighborhoods":31.53,"Addressing homelessness":28.26,"Reducing crime":22.95,"visible":false,"Region":"Latin/South America","US":false},{"City":"Miami","Economic strength":48.54,"Peace and Stability":53.67,"Vibrancy of city":65.91,"Climate disaster preparedness":53.59,"Improving quality of life":49.79,"Investing in neighborhoods":45.94,"Addressing homelessness":31.98,"Reducing crime":41.3,"visible":false,"Region":"North America","US":true},{"City":"Minneapolis","Economic strength":53.73,"Peace and Stability":50.52,"Vibrancy of city":56.93,"Climate disaster preparedness":50.9,"Improving quality of life":49.47,"Investing in neighborhoods":47.28,"Addressing homelessness":30.89,"Reducing crime":34.18,"visible":false,"Region":"North America","US":true},{"City":"Monterrey","Economic strength":67.86,"Peace and Stability":51.7,"Vibrancy of city":60.04,"Climate disaster preparedness":47.98,"Improving quality of life":60,"Investing in neighborhoods":47.28,"Addressing homelessness":45.84,"Reducing crime":36.07,"visible":false,"Region":"Latin/South America","US":false},{"City":"Mumbai","Economic strength":85.57,"Peace and Stability":76.77,"Vibrancy of city":81.82,"Climate disaster preparedness":73.23,"Improving quality of life":82.86,"Investing in neighborhoods":79.92,"Addressing homelessness":71.22,"Reducing crime":75.96,"visible":false,"Region":"Asia Pacific","US":false},{"City":"Munich","Economic strength":68.86,"Peace and Stability":65.68,"Vibrancy of city":70.02,"Climate disaster preparedness":46.68,"Improving quality of life":56.69,"Investing in neighborhoods":51.77,"Addressing homelessness":38.79,"Reducing crime":49.13,"visible":false,"Region":"Europe","US":false},{"City":"Nairobi","Economic strength":43.37,"Peace and Stability":43.76,"Vibrancy of city":55.05,"Climate disaster preparedness":27.38,"Improving quality of life":37.45,"Investing in neighborhoods":37.97,"Addressing homelessness":18.85,"Reducing crime":26.73,"visible":false,"Region":"Africa","US":false},{"City":"Nashville","Economic strength":50.1,"Peace and Stability":47.86,"Vibrancy of city":57.35,"Climate disaster preparedness":39.5,"Improving quality of life":44.97,"Investing in neighborhoods":41.97,"Addressing homelessness":27.45,"Reducing crime":37.87,"visible":false,"Region":"North America","US":true},{"City":"New York","Economic strength":46.63,"Peace and Stability":39.23,"Vibrancy of city":60.28,"Climate disaster preparedness":41.11,"Improving quality of life":39.55,"Investing in neighborhoods":38.35,"Addressing homelessness":23.23,"Reducing crime":34.89,"visible":false,"Region":"North America","US":true},{"City":"Paris","Economic strength":59.21,"Peace and Stability":46.58,"Vibrancy of city":64.79,"Climate disaster preparedness":37.1,"Improving quality of life":46.91,"Investing in neighborhoods":48.11,"Addressing homelessness":28.18,"Reducing crime":36.46,"visible":false,"Region":"Europe","US":false},{"City":"Philadelphia","Economic strength":35.86,"Peace and Stability":35.31,"Vibrancy of city":50.92,"Climate disaster preparedness":37.29,"Improving quality of life":36.78,"Investing in neighborhoods":37.08,"Addressing homelessness":24.22,"Reducing crime":28.11,"visible":false,"Region":"North America","US":true},{"City":"Phoenix","Economic strength":43.45,"Peace and Stability":43.85,"Vibrancy of city":48.97,"Climate disaster preparedness":33.41,"Improving quality of life":38.3,"Investing in neighborhoods":36.08,"Addressing homelessness":21.01,"Reducing crime":29.25,"visible":false,"Region":"North America","US":true},{"City":"Portland","Economic strength":31.78,"Peace and Stability":34.95,"Vibrancy of city":38.22,"Climate disaster preparedness":36.89,"Improving quality of life":34.04,"Investing in neighborhoods":31.14,"Addressing homelessness":16.32,"Reducing crime":24.38,"visible":false,"Region":"North America","US":true},{"City":"Raleigh","Economic strength":56.05,"Peace and Stability":56.58,"Vibrancy of city":59.08,"Climate disaster preparedness":47.7,"Improving quality of life":51.99,"Investing in neighborhoods":48.23,"Addressing homelessness":28.6,"Reducing crime":38.2,"visible":false,"Region":"North America","US":true},{"City":"Riyadh","Economic strength":92.29,"Peace and Stability":92.2,"Vibrancy of city":91.35,"Climate disaster preparedness":82.88,"Improving quality of life":90.36,"Investing in neighborhoods":86.39,"Addressing homelessness":87.94,"Reducing crime":90.85,"visible":false,"Region":"Middle East","US":false},{"City":"San Antonio","Economic strength":52.8,"Peace and Stability":49.29,"Vibrancy of city":57.53,"Climate disaster preparedness":43.82,"Improving quality of life":47.85,"Investing in neighborhoods":42.58,"Addressing homelessness":25.05,"Reducing crime":36.76,"visible":false,"Region":"North America","US":true},{"City":"San Diego","Economic strength":48.23,"Peace and Stability":47.41,"Vibrancy of city":60.04,"Climate disaster preparedness":41.28,"Improving quality of life":43.45,"Investing in neighborhoods":37.76,"Addressing homelessness":21.44,"Reducing crime":32.84,"visible":false,"Region":"North America","US":true},{"City":"San Francisco","Economic strength":41.15,"Peace and Stability":44.4,"Vibrancy of city":52.31,"Climate disaster preparedness":43.33,"Improving quality of life":39.07,"Investing in neighborhoods":35.05,"Addressing homelessness":22.34,"Reducing crime":30.17,"visible":false,"Region":"North America","US":true},{"City":"San Jos","Economic strength":37.75,"Peace and Stability":41.6,"Vibrancy of city":36.84,"Climate disaster preparedness":38.38,"Improving quality of life":41.77,"Investing in neighborhoods":30.85,"Addressing homelessness":28.34,"Reducing crime":24.6,"visible":false,"Region":"Latin/South America","US":false},{"City":"So Paulo","Economic strength":53.11,"Peace and Stability":27.11,"Vibrancy of city":51.32,"Climate disaster preparedness":22.36,"Improving quality of life":33.2,"Investing in neighborhoods":33.47,"Addressing homelessness":24.24,"Reducing crime":19.04,"visible":false,"Region":"Latin/South America","US":false},{"City":"Seattle","Economic strength":44.75,"Peace and Stability":44.69,"Vibrancy of city":45.21,"Climate disaster preparedness":43.22,"Improving quality of life":41.58,"Investing in neighborhoods":37.26,"Addressing homelessness":24.63,"Reducing crime":29.71,"visible":false,"Region":"North America","US":true},{"City":"Seoul","Economic strength":46.69,"Peace and Stability":50.51,"Vibrancy of city":56.77,"Climate disaster preparedness":32.92,"Improving quality of life":46.84,"Investing in neighborhoods":35.76,"Addressing homelessness":33.91,"Reducing crime":43.63,"visible":false,"Region":"Asia Pacific","US":false},{"City":"Shanghai","Economic strength":91.89,"Peace and Stability":88.87,"Vibrancy of city":91.58,"Climate disaster preparedness":86.82,"Improving quality of life":88.31,"Investing in neighborhoods":89.43,"Addressing homelessness":82.68,"Reducing crime":89.09,"visible":false,"Region":"Asia Pacific","US":false},{"City":"Singapore","Economic strength":78.37,"Peace and Stability":87.45,"Vibrancy of city":72.05,"Climate disaster preparedness":67.61,"Improving quality of life":73.64,"Investing in neighborhoods":72.31,"Addressing homelessness":68.04,"Reducing crime":84.91,"visible":false,"Region":"Asia Pacific","US":false},{"City":"Stockholm","Economic strength":54.01,"Peace and Stability":49.25,"Vibrancy of city":67.63,"Climate disaster preparedness":43,"Improving quality of life":48.3,"Investing in neighborhoods":46.27,"Addressing homelessness":34.38,"Reducing crime":28.75,"visible":false,"Region":"Europe","US":false},{"City":"Sydney","Economic strength":54.14,"Peace and Stability":62.61,"Vibrancy of city":60.92,"Climate disaster preparedness":47.98,"Improving quality of life":55.01,"Investing in neighborhoods":51.31,"Addressing homelessness":32.29,"Reducing crime":44.81,"visible":false,"Region":"Asia Pacific","US":false},{"City":"Taipei","Economic strength":73.32,"Peace and Stability":77.78,"Vibrancy of city":76.27,"Climate disaster preparedness":69.09,"Improving quality of life":71.4,"Investing in neighborhoods":69.96,"Addressing homelessness":59.96,"Reducing crime":70.7,"visible":false,"Region":"Asia Pacific","US":false},{"City":"Tampa","Economic strength":47.36,"Peace and Stability":54.3,"Vibrancy of city":57.08,"Climate disaster preparedness":56.83,"Improving quality of life":46.51,"Investing in neighborhoods":42.24,"Addressing homelessness":26.48,"Reducing crime":41.63,"visible":false,"Region":"North America","US":true},{"City":"Tokyo","Economic strength":42.32,"Peace and Stability":55.01,"Vibrancy of city":48.74,"Climate disaster preparedness":43.02,"Improving quality of life":42.41,"Investing in neighborhoods":36.86,"Addressing homelessness":34.89,"Reducing crime":44.14,"visible":false,"Region":"Asia Pacific","US":false},{"City":"Toronto","Economic strength":37.66,"Peace and Stability":43.4,"Vibrancy of city":54.81,"Climate disaster preparedness":29.08,"Improving quality of life":33.4,"Investing in neighborhoods":34.97,"Addressing homelessness":18.24,"Reducing crime":26.6,"visible":false,"Region":"North America","US":false},{"City":"Vancouver","Economic strength":42.07,"Peace and Stability":45.9,"Vibrancy of city":53.06,"Climate disaster preparedness":40.65,"Improving quality of life":35.27,"Investing in neighborhoods":39.66,"Addressing homelessness":22.18,"Reducing crime":28.27,"visible":false,"Region":"North America","US":false},{"City":"Washington, D.C.","Economic strength":53.49,"Peace and Stability":49.07,"Vibrancy of city":63.67,"Climate disaster preparedness":48.06,"Improving quality of life":49.9,"Investing in neighborhoods":47.75,"Addressing homelessness":32.6,"Reducing crime":36.6,"visible":false,"Region":"North America","US":true}]');var po=se('<div class="chart-resizer-container"><div class="chart-content"><!></div></div>');function mo(e,t){Je(t,!1);let n=F(t,"minWidth",8,300),i=F(t,"minHeight",8,300),r=F(t,"maxWidth",8,600),a=F(t,"maxHeight",8,600),s=M(),l=M(0),f=M(0),c;function o(){if(y(s)){const g=y(s).getBoundingClientRect(),p=g.width,m=g.height;E(l,Math.max(n(),Math.min(p,r()))),E(f,Math.max(i(),Math.min(m,a())))}}nn(()=>(o(),c=new ResizeObserver(()=>{o()}),y(s)&&c.observe(y(s)),()=>{c&&y(s)&&c.unobserve(y(s))})),We();var h=po(),d=T(h),u=T(d);vi(u,t,"default",{get width(){return y(l)},get height(){return y(f)}}),q(d),q(h),ot(h,g=>E(s,g),()=>y(s)),ge(()=>sn(d,`
      width: ${y(l)??""}px;
      height: ${y(f)??""}px;
      max-width: ${r()??""}px;
      max-height: ${a()??""}px;
    `)),re(e,h),Qe()}var vo=se('<div class="app-container svelte-17gdei8"><!> <div class="chart-container svelte-17gdei8"><!></div></div>');function So(e,t){Je(t,!1);const n=new Set;for(const o of ue)for(const h in o)typeof o[h]=="number"&&n.add(h);ue.find(o=>o.Region==="Global"),[...new Set(ue.map(o=>o.Region))];const i=ue.filter(o=>o.Region!=="Global");let r=M(i.filter(o=>o.visible));function a(o){console.log("Dropdown selection changed:",o.detail),E(r,o.detail)}We();var s=vo(),l=T(s);Ei(l,{get citiesData(){return ue},get selectedCities(){return y(r)},$$events:{citySelect:a}});var f=ne(l,2),c=T(f);mo(c,{minWidth:400,minHeight:400,maxWidth:800,maxHeight:800,children:ui,$$slots:{default:(o,h)=>{const d=Oe(()=>h.width);yo(o,{get quantitativeColumns(){return n},get selectedCities(){return y(r)},get citiesData(){return ue},get width(){return y(d)},get height(){return y(d)}})}}}),q(f),q(s),re(e,s),Qe()}export{So as component,Ao as universal};
